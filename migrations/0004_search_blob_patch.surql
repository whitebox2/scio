-- ALIGN SEARCH ANALYZER WITH APP-SIDE NGRAM PREPROCESSING
REMOVE ANALYZER scio_en_ja;
DEFINE ANALYZER scio_en_ja TOKENIZERS blank, camel, class, punct FILTERS lowercase;

-- SEARCH BLOB IS NOW POPULATED BY THE APPLICATION (NORMALIZED TEXT + SYNTHETIC NGRAMS)
DEFINE FIELD OVERWRITE search_blob ON TABLE documents TYPE string ASSERT string::len(string::trim($value)) > 0;
